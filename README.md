# AODV-in-OPNET
AODV in OPNET 14.5. The work based on this code has been published in

F. Tong, W. Tang, L. Peng, R. Xie, W. Yang, Y. Kim, `A Node-Grade based AODV Routing Protocol for Wireless Sensor Network`, the 2nd International Conference on Networks Security, Wireless Communications and Trusted Computing (NSWCTC), pp. 180â€“183, Apr. 2010. (http://dx.doi.org/10.1109/NSWCTC.2010.178)

## Record about Revising the Original NIST AODV & Own addition
### 1. In the Node Model of "aodv", it contains (from top to bottom):
  "module name"	|	"process name"</p>
	  ---------------|-------------</p>
	  source	 |	  source</p>
	   sink		 |	  aodv_sink</p>
	 aodv_routing	 |   	  aodv_routing</p>
	wlan_mac_intf	 |	  aodv_wlan_mac_interface</p>
	wireless_lan_mac |	  wlan_dispatch	(in 14.5)</p>
### 2. Add two pipeline stage files: wlan_txdel_wsn (1st stage) & wlan_ecc_wsn (13th stage), which are the modifications of the original wlan_txdel and wlan_ecc in OPNET 14.5 respectively. You should compile these two files before running the simulation.

The two pipeline stage files have two functions: energy model (refer to LEACH) & communication range restriction.

### 3. The type of the field "Lifetime" in RREP packet is changed to "floating point" from "integer".

## Configuration specification
### 1. Open `wlan_mac.pr.m` using OPNET 14.5, compile it to replace the original objective file in OPNET 14.5, because I have modified this file. Don't worry, the original wlan_mac.pr.m in 14.5 is not replaced, we just want to get the modified objective file. (You'd better compile all process files.)
### 2. Network Model specification
#### a. 3 nodes: 
 Node | Description          
 ------------- | -----------
 node 0| the sink node ("MAC Address"=0, "Node Type"=sink, "source.Send DATA"=disabled), for receiving data packets from other nodes;
node 1 | the intermediate node ("MAC Address"=1, "Node Type"=sensor, "source.Send DATA"=disabled);
node 2 | the source node ("MAC Address"=2, "Node Type"= sensor, "source.Send DATA"= enabled, "source.Final Dest" = 0).
#### b. Other attributes can be set in "Inputs->Object Attributes" when running the simulation. Please note that three file paths are needed to record data generated by simulation:
 File | Description          
 ------------- | -----------
 1st file| "sink.Sink File", Default setting:"C:\OPNET SIM\AODV for OPNET 14.5\result\sink.txt";
2nd file| "Invalid Time Record File". Default setting:"C:\OPNET SIM\AODV for OPNET 14.5\result\invalid time.txt". The "Energy" attribute assign initial energy to each node, so this file record which node has been energy exhausted during the simulation;
	3rd file| "sink File Two".Default setting:"C:\OPNET SIM\AODV for OPNET 14.5\result\sink_two.txt";
